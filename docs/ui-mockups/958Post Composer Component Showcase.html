<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Post Composer Component</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* CSS Reset */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html, body {
      height: 100%;
    }
    body {
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }
    img, picture, video, canvas, svg {
      display: block;
      max-width: 100%;
    }
    input, button, textarea, select {
      font: inherit;
    }
    p, h1, h2, h3, h4, h5, h6 {
      overflow-wrap: break-word;
    }

    /* Design System Tokens */
    :root {
      /* Typography */
      --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      --font-size-body: 16px;
      --font-size-caption: 14px;
      --font-weight-regular: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 600;

      /* Color Palette */
      --color-primary-700: #1976D2;
      --color-primary-600: #1E88E5;
      --color-primary-50: #E3F2FD;
      --color-neutral-white: #FFFFFF;
      --color-neutral-50: #F8F9FA;
      --color-neutral-100: #F1F3F5;
      --color-neutral-200: #E9ECEF;
      --color-neutral-500: #ADB5BD;
      --color-neutral-600: #6C757D;
      --color-neutral-900: #212529;
      --color-semantic-error: #D32F2F;
      --color-semantic-error-bg: #FFEBEE;

      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;

      /* Borders */
      --border-radius-sm: 4px;
      --border-radius-md: 8px;
      --border-radius-lg: 12px;
      --border-width: 1px;
      --border-color: #DEE2E6;

      /* Shadows */
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }

    /* Base Styles */
    body {
      font-family: var(--font-primary);
      background-color: var(--color-neutral-50);
      color: var(--color-neutral-900);
      padding: var(--space-xl);
    }
    .screen-container {
      max-width: 600px;
      margin: 0 auto;
      display: grid;
      gap: var(--space-xl);
    }
    .variant-title {
        margin-bottom: var(--space-md);
        padding-bottom: var(--space-sm);
        border-bottom: var(--border-width) solid var(--border-color);
        color: var(--color-neutral-600);
    }
    .variant-title h3 {
        font-size: 20px;
        font-weight: var(--font-weight-semibold);
    }
    .variant-title p {
        font-size: var(--font-size-caption);
        color: var(--color-neutral-600);
    }


    /* Atomic Components */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--border-radius-md);
      border: none;
      font-weight: var(--font-weight-semibold);
      cursor: pointer;
      transition: background-color 150ms ease, transform 150ms ease;
    }
    .btn:focus-visible {
      outline: 2px solid var(--color-primary-600);
      outline-offset: 2px;
    }
    .btn--primary {
      background-color: var(--color-primary-700);
      color: var(--color-neutral-white);
    }
    .btn--primary:hover {
      background-color: #1565C0;
    }
    .btn--primary:disabled {
      background-color: var(--color-neutral-200);
      color: var(--color-neutral-500);
      cursor: not-allowed;
    }
    .btn--secondary {
      background-color: var(--color-neutral-100);
      color: var(--color-neutral-900);
      border: var(--border-width) solid var(--border-color);
    }
    .btn--secondary:hover {
        background-color: var(--color-neutral-200);
    }
    .btn--icon {
      padding: var(--space-sm);
      background: transparent;
      border-radius: 50%;
    }
    .btn--icon:hover {
        background-color: var(--color-neutral-100);
    }

    .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background-color: var(--color-neutral-200);
      overflow: hidden;
      flex-shrink: 0;
    }
    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .icon {
      width: 24px;
      height: 24px;
      stroke-width: 2;
      stroke: currentColor;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    
    .loading-spinner {
      width: 20px;
      height: 20px;
      border: 2px solid currentColor;
      border-right-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }


    /* PostComposer Component Styles */
    .post-composer {
      background-color: var(--color-neutral-white);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-md);
      padding: var(--space-md);
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
    }
    
    .post-composer__main {
      display: flex;
      gap: var(--space-md);
    }

    .post-composer__textarea {
      width: 100%;
      min-height: 120px;
      border: none;
      resize: vertical;
      font-size: var(--font-size-body);
      padding-top: var(--space-sm);
    }
    .post-composer__textarea:focus {
      outline: none;
    }
    .post-composer__textarea::placeholder {
        color: var(--color-neutral-500);
        font-size: 18px;
    }

    .post-composer__attachments {
        margin-left: calc(48px + var(--space-md));
        display: flex;
        flex-direction: column;
        gap: var(--space-sm);
    }

    .post-composer__image-grid {
      display: grid;
      gap: var(--space-sm);
    }
    .post-composer__image-grid--1 { grid-template-columns: 1fr; }
    .post-composer__image-grid--2 { grid-template-columns: 1fr 1fr; }
    .post-composer__image-grid--3 { grid-template-columns: 1fr 1fr; }
    .post-composer__image-grid--3 .image-preview:first-child { grid-column: 1 / -1; }
    .post-composer__image-grid--4 { grid-template-columns: 1fr 1fr; }
    
    .image-preview {
      position: relative;
      border-radius: var(--border-radius-md);
      overflow: hidden;
      aspect-ratio: 16 / 9;
    }
    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .image-preview__remove-btn {
      position: absolute;
      top: var(--space-sm);
      right: var(--space-sm);
      background-color: rgba(0, 0, 0, 0.6);
      color: var(--color-neutral-white);
      border: none;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .image-preview__remove-btn .icon {
        width: 16px;
        height: 16px;
    }

    .link-preview-card {
      border: var(--border-width) solid var(--border-color);
      border-radius: var(--border-radius-md);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
    }
    .link-preview-card__image {
      width: 100%;
      height: 150px;
      object-fit: cover;
      background-color: var(--color-neutral-100);
    }
    .link-preview-card__content {
      padding: var(--space-md);
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
    }
    .link-preview-card__title {
      font-weight: var(--font-weight-semibold);
      font-size: var(--font-size-body);
      color: var(--color-neutral-900);
    }
    .link-preview-card__description {
      font-size: var(--font-size-caption);
      color: var(--color-neutral-600);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;  
      overflow: hidden;
    }
    .link-preview-card__remove-btn {
        position: absolute;
        top: var(--space-sm);
        right: var(--space-sm);
        background-color: rgba(0, 0, 0, 0.6);
        color: var(--color-neutral-white);
        border: none;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    .post-composer__footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: var(--space-md);
      border-top: var(--border-width) solid var(--border-color);
    }
    .post-composer__actions {
      display: flex;
      gap: var(--space-sm);
    }
    
    .post-composer__error {
      background-color: var(--color-semantic-error-bg);
      color: var(--color-semantic-error);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--border-radius-sm);
      font-size: var(--font-size-caption);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .post-composer.is-submitting .post-composer__textarea,
    .post-composer.is-submitting .post-composer__actions .btn {
      opacity: 0.6;
      pointer-events: none;
    }
    
    /* Responsive Styles */
    @media (max-width: 768px) {
      body {
        padding: 0;
        background-color: var(--color-neutral-white);
      }
      .screen-container {
        padding: var(--space-md);
      }
      .post-composer {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 0;
        box-shadow: none;
        display: flex;
        flex-direction: column;
      }
      .post-composer__header-mobile {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: var(--space-md);
        border-bottom: var(--border-width) solid var(--border-color);
      }
      .post-composer__main {
        flex-grow: 1;
        overflow-y: auto;
      }
      .post-composer__footer {
        border-top: none;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: var(--color-neutral-white);
        padding: var(--space-md);
        border-top: var(--border-width) solid var(--border-color);
      }
    }
  </style>
</head>
<body>
  <div class="screen-container">

    <!-- Default State -->
    <div class="variant">
      <div class="variant-title">
        <h3>Default State</h3>
        <p>The initial state of the composer, ready for input.</p>
      </div>
      <div class="post-composer" id="composer-default">
        <div class="post-composer__main">
          <div class="avatar">
            <img src="https://i.pravatar.cc/48?u=jane-doe" alt="Jane Doe's avatar">
          </div>
          <textarea class="post-composer__textarea" placeholder="What do you want to talk about?"></textarea>
        </div>
        <div class="post-composer__footer">
          <div class="post-composer__actions">
            <button class="btn btn--icon" aria-label="Add image">
              <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
            </button>
            <button class="btn btn--icon" aria-label="Add link">
              <svg class="icon" viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
            </button>
          </div>
          <button class="btn btn--primary" disabled>Post</button>
        </div>
      </div>
    </div>
    
    <!-- With Text -->
    <div class="variant">
        <div class="variant-title">
          <h3>With Text</h3>
          <p>Composer with text entered. The 'Post' button is enabled.</p>
        </div>
        <div class="post-composer" id="composer-text">
          <div class="post-composer__main">
            <div class="avatar">
              <img src="https://i.pravatar.cc/48?u=jane-doe" alt="Jane Doe's avatar">
            </div>
            <textarea class="post-composer__textarea">Excited to share insights from the latest tech conference! The future of AI in professional networking is looking incredibly bright.</textarea>
          </div>
          <div class="post-composer__footer">
            <div class="post-composer__actions">
              <button class="btn btn--icon" aria-label="Add image">
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
              </button>
              <button class="btn btn--icon" aria-label="Add link">
                <svg class="icon" viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
              </button>
            </div>
            <button class="btn btn--primary">Post</button>
          </div>
        </div>
    </div>

    <!-- With Images (4) -->
    <div class="variant">
        <div class="variant-title">
          <h3>With Images</h3>
          <p>Composer with four images attached. The 'Add Image' button would be disabled.</p>
        </div>
        <div class="post-composer" id="composer-images">
          <div class="post-composer__main">
            <div class="avatar">
              <img src="https://i.pravatar.cc/48?u=jane-doe" alt="Jane Doe's avatar">
            </div>
            <textarea class="post-composer__textarea">Some photos from the event.</textarea>
          </div>
          <div class="post-composer__attachments">
            <div class="post-composer__image-grid post-composer__image-grid--4">
              <div class="image-preview">
                <img src="https://picsum.photos/400/225?random=1" alt="Image preview 1">
                <button class="image-preview__remove-btn" aria-label="Remove image 1">
                  <svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
              </div>
              <div class="image-preview">
                <img src="https://picsum.photos/400/225?random=2" alt="Image preview 2">
                <button class="image-preview__remove-btn" aria-label="Remove image 2">
                  <svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
              </div>
              <div class="image-preview">
                <img src="https://picsum.photos/400/225?random=3" alt="Image preview 3">
                <button class="image-preview__remove-btn" aria-label="Remove image 3">
                  <svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
              </div>
              <div class="image-preview">
                <img src="https://picsum.photos/400/225?random=4" alt="Image preview 4">
                <button class="image-preview__remove-btn" aria-label="Remove image 4">
                  <svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
              </div>
            </div>
          </div>
          <div class="post-composer__footer">
            <div class="post-composer__actions">
              <button class="btn btn--icon" aria-label="Add image" disabled>
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
              </button>
              <button class="btn btn--icon" aria-label="Add link">
                <svg class="icon" viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
              </button>
            </div>
            <button class="btn btn--primary">Post</button>
          </div>
        </div>
    </div>
    
    <!-- With Link Preview -->
    <div class="variant">
        <div class="variant-title">
          <h3>With Link Preview</h3>
          <p>Composer after a URL has been pasted and a preview card is generated.</p>
        </div>
        <div class="post-composer" id="composer-link">
          <div class="post-composer__main">
            <div class="avatar">
              <img src="https://i.pravatar.cc/48?u=jane-doe" alt="Jane Doe's avatar">
            </div>
            <textarea class="post-composer__textarea">Check out this excellent article on modern frontend architecture. https://example.com</textarea>
          </div>
          <div class="post-composer__attachments">
            <div class="link-preview-card">
                <img class="link-preview-card__image" src="https://picsum.photos/500/200?random=5" alt="Preview image for the linked article">
                <div class="link-preview-card__content">
                  <div class="link-preview-card__title">The Future of Web Development in 2025</div>
                  <div class="link-preview-card__description">An in-depth look at emerging trends, frameworks, and best practices that will shape the web development landscape in the coming year and beyond.</div>
                </div>
                <button class="link-preview-card__remove-btn" aria-label="Remove link preview">
                    <svg class="icon" viewBox="0 0 24 24" style="width: 16px; height: 16px;"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
          </div>
          <div class="post-composer__footer">
            <div class="post-composer__actions">
              <button class="btn btn--icon" aria-label="Add image">
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
              </button>
              <button class="btn btn--icon" aria-label="Add link" disabled>
                <svg class="icon" viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
              </button>
            </div>
            <button class="btn btn--primary">Post</button>
          </div>
        </div>
    </div>

    <!-- Submitting State -->
    <div class="variant">
        <div class="variant-title">
          <h3>Submitting State</h3>
          <p>The state after the user clicks 'Post'. The form is disabled and a loader is shown.</p>
        </div>
        <div class="post-composer is-submitting" id="composer-submitting">
          <div class="post-composer__main">
            <div class="avatar">
              <img src="https://i.pravatar.cc/48?u=jane-doe" alt="Jane Doe's avatar">
            </div>
            <textarea class="post-composer__textarea" disabled>Excited to share insights from the latest tech conference!</textarea>
          </div>
          <div class="post-composer__footer">
            <div class="post-composer__actions">
              <button class="btn btn--icon" aria-label="Add image" disabled>
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
              </button>
              <button class="btn btn--icon" aria-label="Add link" disabled>
                <svg class="icon" viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
              </button>
            </div>
            <button class="btn btn--primary" disabled>
              <div class="loading-spinner"></div>
              Posting...
            </button>
          </div>
        </div>
    </div>

    <!-- Error State -->
    <div class="variant">
        <div class="variant-title">
          <h3>Error State</h3>
          <p>Shows an error message if the post submission fails.</p>
        </div>
        <div class="post-composer" id="composer-error">
          <div class="post-composer__main">
            <div class="avatar">
              <img src="https://i.pravatar.cc/48?u=jane-doe" alt="Jane Doe's avatar">
            </div>
            <textarea class="post-composer__textarea">This post will fail to submit.</textarea>
          </div>
          <div class="post-composer__error">
            <svg class="icon" viewBox="0 0 24 24" style="width: 20px; height: 20px;"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            <span>Failed to create post. Please check your connection and try again.</span>
          </div>
          <div class="post-composer__footer">
            <div class="post-composer__actions">
              <button class="btn btn--icon" aria-label="Add image">
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
              </button>
              <button class="btn btn--icon" aria-label="Add link">
                <svg class="icon" viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
              </button>
            </div>
            <button class="btn btn--primary">Post</button>
          </div>
        </div>
    </div>
    
  </div>

  <script>
    // Simple script for demonstrating UI interactions like removing previews.
    document.addEventListener('click', function(event) {
        // Handle removing image previews
        const removeImageBtn = event.target.closest('.image-preview__remove-btn');
        if (removeImageBtn) {
            const previewToRemove = removeImageBtn.closest('.image-preview');
            if (previewToRemove) {
                previewToRemove.style.display = 'none'; // Simple hide for demo
            }
        }

        // Handle removing the link preview
        const removeLinkBtn = event.target.closest('.link-preview-card__remove-btn');
        if (removeLinkBtn) {
            const linkPreview = removeLinkBtn.closest('.link-preview-card');
            if (linkPreview) {
                linkPreview.style.display = 'none'; // Simple hide for demo
            }
        }
    });
  </script>
</body>
</html>